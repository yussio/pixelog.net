<div class="<%= block %>__search">
    <h4 class="<%= block %>__title">Archive</h4>

<%
let arr = new Array();
%>
<% site.posts.each(function(post){ %>
  <%
  arr.push(post.date.format('YYYY年MM月'))
  %>
<% }) %>
<%
function toCountDict(array){
  let dict = {};
  for(let key of array){
      dict[key] = array.filter(function(x){return x==key}).length;
  }
  return dict;
}
arr = toCountDict(arr.sort());
%>

<select class="archive-list" name="sort" onchange="location.href=this.value;">
    <option value="">月を選択</option>
  <% Object.keys(arr).forEach(function(key){ %>
    <option value="/<%= config.archive_dir %>/<%= key.slice(0,4) %>/<%= key.slice(5,7) %>/"><%= key %> (<%= arr[key]%>)</option>
  <% }); %>
</select>

</div>
