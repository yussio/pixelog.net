---
title: ブログデザインの細かな変更とかコンセプトとか
categories:
  - 雑記
date: 2020-04-24 13:47:50
pid: q2nsid
---

このブログは今年の1月から、フルスクラッチで自作したテーマを適用しています。

[テーマを自作してブログをリニューアルしました](/post/s6osbrt5i3/)

テーマを公開してからも3ヶ月間、毎日小さな変更を重ねていたので、やったこととかを記録に残しておきます。

## 内部構造

### メディアクエリ

HTMLの構造やCSSの当て方を見直しに見直しを重ねて、一番多いときで22000文字あったCSSを16000文字まで減らしました。

タブレット・スマホ対応のためのメディアクエリは今のところこれだけです。

```css
@media (max-width:1199px){
  .header{margin:0 0 32px 0}
  .container{grid-template-columns:minmax(0,850px)}
  .aside{padding:0 16px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:50px}
  .aside__ad{order:1}
}

@media (max-width:767px){
  .header{margin:0 0 16px 0;padding:32px 16px}
  .header__inner{height:80px;flex-direction:column}
  .post-list{font-size:13.5px}
  .post{padding:36px 16px;font-size:15px}
}
```

少ない記述でもスマホ表示には対応しています。PCの方はウインドウサイズを縮めたりして遊んでみてください。

メディアクエリというのは、結局ただCSSを上書きするものなので、ブレイクポイントが多ければ多いほど、中の記述が多ければ多いほど複雑怪奇になっていき、管理はどんどん大変になります。なのでメディアクエリなんてものは、書かなければ書かないほど良い、ものだと思っています。

CSSを減らすコツはやはりemの使い方だと思います。PCとスマホで値を変えたいもの（font-size, margin, paddingなど)は全てemで指定して、font-sizeに集約しました。


### 構造化マークアップ

構造化マークアップに対応してみました。

初めて自分の手で作業してみて思ったのは、構造化マークアップはオカルトだということですね。パンくずリストのマークアップはいいとして、その他の部分の闇が深すぎる。いろんなドキュメントを読み漁ったけれど、schema.org定義されているタイプ、Article、Blog、BlogPostingとかの違いとか全く分からない。そしてSEOの効果も約束されない...

これ以上は深追いしないことにします。


### BEM

HTMLはBEMでコーディングしているのですが、結局のところ小規模なサイトだとmodifierの恩恵があまり受けられない気がします。

extendを使って差分だけ記述しても、コンパイルするとやたらファイルサイズのかさむCSSが生成されるのが気になるところ。なので、マルチクラスは許容することにしました。

### 外部ファイルの最適化

scriptタグは、なんとなく`</body>`の直前で読み込むのが良いと思っていたのですが、それはもう4、5年前の話で、今は違うみたいです。

[本当は速くならない「Webサイトの表示高速化アンチパターン」10選](https://note.com/rdlabo/n/n8731adda8b57#FVzY3)

deferやasync属性をつけて読み込むなら、リクエストを出すのは早いほうがいいだろう、ということで、scriptタグは`<head>`の中でも一番上で読み込むようにしました。

気がかりなのは、静的サイトでここまでチューニングしているのに、ページ表示速度が全然速くないこと。調べてみるとやはりNetlifyが足枷になっています。国内からのアクセスがほとんどなのに、サーバーやCDNが国内にないのは辛い。（東京にあったノードはもうないとか）


## デザインについて

このブログのデザインで常に心がけたのは、閲覧者に学習させないということと、情報を押し付けないことの2点です。

ハンバーガーメニューは代表的な例ですね。あれはハンバーガーをクリクリしてみるまで中身が一切分からないんですよ。いつも使い慣れているスマホアプリとかならともかく、どうして初めて来たサイトで、何が挟まっているのかも分からないハンバーガーをクリックするんですかね。考えれば考えるほど分からない。

なので、どこにどんなリンクがあるかなどの学習の余地は、できるだけ閲覧者に与えないようにしました。

また、このブログの閲覧者はほぼ検索からの一見さんです。なので逆説的ですが、記事下には関連記事だとか人気記事だとかトップページへ戻るリンクだとかは一切排除しました。

これは自分にとって、情報は自分から取得しに行くものであって、押し付けられるのは苦手だというのもあります。

閲覧者は、記事を読み終わったら戻るボタンで検索画面に戻り次のサイト探す、という意識の中記事を読んでいる人で大半です。なのでそういう人たちが、記事を読み終わった後は気持ちよく帰っていただけるようにしています。


## これからについて

という訳で、ブログデザインについては概ね完成しました。あとは記事を書くだけ！なのですが、自分はHTMLなりCSSなりをいじくり回したりするのが好きなだけであって、記事を書いてサイトを運営することはそこまで好きじゃない...という問題に直面しております。

とりあえず、コンテンツありきのサイトになるように、記事総数が100件になるまで集中的に記事を上げていこうと思います。
